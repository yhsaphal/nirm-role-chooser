<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="robots" content="noindex, nofollow, noarchive, nosnippet, noimageindex" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Select Your Role - NIRM</title>

<link href="https://fonts.googleapis.com/css2?family=Bricolage+Grotesque&display=swap" rel="stylesheet" />

<style>
  body {
    font-family: 'Bricolage Grotesque', sans-serif;
    margin:0; padding:0;
    background: linear-gradient(-45deg, #001b3e, #fffcf0, #004080, #a0c4ff);
    background-size: 400% 400%;
    animation: gradientBG 30s ease infinite;
    color: #001b3e;
    display:flex; justify-content:center; align-items:center;
    flex-direction:column;
    min-height:100vh; overflow-x:hidden;
  }

  @keyframes gradientBG {
    0% {background-position:0% 50%;}
    50% {background-position:100% 50%;}
    100% {background-position:0% 50%;}
  }

  /* Banner marquee */
  .nirm-banner {
    position: relative;
    white-space: nowrap;
    overflow: hidden;
    font-size: 1.4rem;
    padding: 0.5rem 0;
    background-color: #001b3e;
    color: #fffcf0;
    text-transform: uppercase;
    letter-spacing: 2px;
    width:100%;
  }
  .nirm-banner::before,
  .nirm-banner::after {
    content:'';
    position:absolute;
    top:0;
    width:5rem; height:100%;
    z-index:2;
  }
  .nirm-banner::before { left:0; background:linear-gradient(to right,#001b3e,transparent);}
  .nirm-banner::after { right:0; background:linear-gradient(to left,#001b3e,transparent);}
  .nirm-banner span {
    display:inline-block;
    padding-left:100%;
    animation: marquee 30s linear infinite;
  }
  .nirm-banner span:hover { animation-play-state:paused; }
  @keyframes marquee { 0% {transform:translateX(0);} 100% {transform:translateX(-100%);} }

  /* Glassy Hero box */
  .hero-box {
    display:flex; flex-direction:column; align-items:center; text-align:center;
    padding:1.2rem 1.8rem; border-radius:20px;
    background: rgba(255,255,255,0.15);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    color:#fffcf0;
    box-shadow:0 10px 30px rgba(0,0,0,0.4);
    perspective:1000px; transform-style:preserve-3d;
    transition: transform 0.5s ease;
    max-width:360px;
    width:90%;
    border: 1px solid rgba(255, 255, 255, 0.3);
  }
  .hero-box:hover { transform: rotateY(5deg) rotateX(3deg); }

  .hero-box .logo { font-size:2.5rem; font-weight:bold; margin-bottom:0.8rem; }
  .hero-box .tagline { font-size:1.1rem; line-height:1.5; min-height:6em; }

  .role-buttons { margin-top:1.5rem; }
  .role-buttons button {
    font-size:1.3rem; margin:0.4rem; padding:0.9rem 2rem;
    border:none; border-radius:10px;
    background-color:#fffcf0; color:#001b3e;
    cursor:pointer; box-shadow:0 5px 15px rgba(0,0,0,0.3);
    transition: transform 0.2s ease, box-shadow 0.2s ease;
  }
  .role-buttons button:hover {
    transform: translateY(-4px);
    box-shadow:0 10px 25px rgba(0,0,0,0.4);
  }

  /* Timeout overlay hidden completely */
  #timeoutOverlay {
    display: none !important;
    position: fixed; top:0; left:0; width:100%; height:100%;
    background: rgba(0,0,0,0.85);
    color: #fffcf0;
    font-size: 2rem;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 9999;
    text-align: center;
    padding: 1rem;
  }

  /* Top banner fixed */
  .nirm-banner.top {
    position: fixed;
    top: 0;
    width: 100%;
    z-index: 100;
  }

  /* Bottom banner fixed */
  .bottom-banner-container {
    position: fixed; bottom:0; width:100%; z-index:100;
  }
</style>
</head>
<body>

<!-- Top Banner -->
<div class="nirm-banner top">
  <span>NIRM • NIRM • NIRM • NIRM • NIRM • NIRM • NIRM • NIRM • NIRM • NIRM • NIRM • NIRM • NIRM • NIRM • NIRM • NIRM • NIRM • NIRM • NIRM • NIRM • NIRM • NIRM • NIRM • NIRM • NIRM • NIRM • NIRM • NIRM • NIRM • NIRM • NIRM • NIRM</span>
</div>

<!-- Hero Section -->
<div class="hero-box" role="main" aria-label="Role selection box">
  <div class="logo" aria-label="NIRM Logo">NIRM</div>
  <div class="tagline" aria-live="polite" id="teleprompter"></div>
  <div class="role-buttons">
    <button id="individual-btn">Individual</button>
    <button id="business-btn">Business</button>
  </div>
</div>

<!-- Bottom Banner -->
<div class="bottom-banner-container">
  <div class="nirm-banner bottom">
    <span>NIRM • NIRM • NIRM • NIRM • NIRM • NIRM • NIRM • NIRM • NIRM • NIRM • NIRM • NIRM • NIRM • NIRM • NIRM • NIRM • NIRM • NIRM • NIRM • NIRM • NIRM • NIRM • NIRM • NIRM • NIRM • NIRM • NIRM • NIRM • NIRM • NIRM • NIRM • NIRM</span>
  </div>
</div>

<div id="timeoutOverlay">⏳ Time limit exceeded. Returning to home page...</div>

<script>
  const WEBHOOK_URL = 'https://hook.us1.make.com/your-secure-webhook-id';
  const AUTH_TOKEN = localStorage.getItem('auth_token');
  const INDIVIDUAL_FORM = "https://nirm.uk/formindividual";
  const BUSINESS_FORM = "https://nirm.uk/formbusiness";
  const HOME_PAGE = "https://nirm.uk";
  const TAGLINE_LINES = [
    "Connecting You to the Best",
    "Your Vision, Our Tech",
    "Your Event, Your Way",
    "Built for You",
    "Powered by SapphireAI, Backed by OpenAI",
    "The Clear Path for Seamless Execution",
    "Your Sourcing Solution",
    "Where Events Meet Innovation"
  ];
  const TIME_LIMIT = 2*60*1000;

  const teleprompter = document.getElementById("teleprompter");
  const lineDuration = TIME_LIMIT / TAGLINE_LINES.length;
  let currentLine = 0;
  function showLine(){
    teleprompter.textContent = TAGLINE_LINES[currentLine];
    currentLine = (currentLine+1)%TAGLINE_LINES.length;
    setTimeout(showLine,lineDuration);
  }
  showLine();

  function updateRole(role){
    if(!AUTH_TOKEN){ alert("Authentication missing. Redirecting to home..."); return window.location.href=HOME_PAGE; }
    fetch(WEBHOOK_URL,{
      method:'POST',
      headers:{ 'Content-Type':'application/json','Authorization':`Bearer ${AUTH_TOKEN}` },
      body: JSON.stringify({role})
    }).then(()=> {
      window.location.href = (role==='individual')?INDIVIDUAL_FORM:BUSINESS_FORM;
    }).catch(err=>{ alert(`Failed to update role: ${err.message}`); });
  }
  document.getElementById('individual-btn').addEventListener('click', ()=> updateRole('individual'));
  document.getElementById('business-btn').addEventListener('click', ()=> updateRole('business'));

  /* Timeout hidden for now
  setTimeout(()=>{
    const timeoutOverlay = document.getElementById('timeoutOverlay');
    timeoutOverlay.style.display="flex";
    setTimeout(()=>window.location.href=HOME_PAGE,3000);
  }, TIME_LIMIT);
  */
</script>
</body>
</html>
